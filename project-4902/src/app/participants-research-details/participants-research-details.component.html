<!-- <section class="text-gray-600 body-font">
    <div class="container px-5 py-10 mx-auto">
      <h1 class="text-3xl font-medium title-font text-gray-900 mb-4 text-center">
        Available Research Projects
      </h1>
  
      <div *ngIf="researchProjects$ | async as researchProjects; else loading">
        <div *ngIf="researchProjects.length > 0; else noProjects">
          <div *ngFor="let project of researchProjects" class="bg-white p-4 rounded shadow-md mb-4">
            <h2 class="text-xl font-bold">{{ project.title }}</h2>
            <p><strong>Description:</strong> {{ project.description }}</p>
            <p><strong>Researchers:</strong> {{ project.researchers }}</p>
            <p><strong>Target Audience:</strong> {{ project.targetAudience }}</p>
            <p><strong>Tool Link:</strong> <a [href]="project.toolLink" target="_blank" class="text-blue-600 underline">
                {{ project.toolLink }}
              </a></p>
  
            <button (click)="joinResearch(project.id)"
              class="bg-green-600 hover:bg-green-800 text-white font-bold py-2 px-4 rounded mt-2">
              Join Research
            </button>
          </div>
        </div>
      </div>
  
      <ng-template #loading>
        <p class="text-center text-gray-500">Loading research projects...</p>
      </ng-template>
  
      <ng-template #noProjects>
        <p class="text-center text-gray-500">No research projects available.</p>
      </ng-template>
    </div>
  </section>
-->
<section class="text-gray-600 body-font">
  <div class="container px-5 py-10 mx-auto">
    <h1 class="text-3xl font-medium title-font text-gray-900 mb-4 text-center">
      Available Research Projects
    </h1>

    <!-- Success Message -->
    <div *ngIf="showSuccessMessage" class="bg-green-500 text-white p-2 text-center rounded mb-4">
      Successfully joined research project!
    </div>

    <!-- Loop through research projects -->
    <div *ngFor="let project of researchProjects$ | async" class="bg-gray-100 p-4 rounded mb-4 shadow">
      <h3 class="text-xl font-bold">{{ project.title }}</h3>
      <p><strong>Description:</strong> {{ project.description }}</p>
      <p><strong>Researchers:</strong> {{ project.researchers }}</p>
      <p><strong>Target Audience:</strong> {{ project.targetAudience }}</p>
      <p><strong>Tool Link:</strong> 
        <a [href]="project.toolLink" target="_blank" class="text-blue-600 underline">{{ project.toolLink }}</a>
      </p>

      <!-- Display Participants List -->
      <h4 class="mt-4 font-medium">Participants:</h4>
      <ul class="list-disc pl-5">
        <li *ngFor="let participant of project['participants']">
          <div class="flex justify-between items-center py-2 border-b">
            <span>
              <!-- Make participant name clickable -->
              <a [routerLink]="['/view-others-profile', participant.uid]" class="text-blue-600 hover:underline">
                {{ participant.displayName }} ({{ participant.email }})
              </a>
            </span>
            <!-- Optionally add a "Remove" button if the user can remove themselves -->
            <button *ngIf="participant.uid === auth.currentUser?.uid" (click)="removeParticipant(project.id, participant.uid)" class="bg-red-500 text-white py-1 px-2 rounded">
              Remove
            </button>
          </div>
        </li>
      </ul>

      <!-- Join Research Button -->
      <button (click)="joinResearch(project.id)" class="bg-green-700 hover:bg-green-500 text-white font-bold py-1 px-3 rounded mt-3">
        Join Research
      </button>
    </div>
  </div>
</section>
